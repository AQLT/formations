<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alain Quartier-la-Tente">

<title>Formations - 0 - Traitement des séries temporelles sous R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../img/favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-X652XRGDPL"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
 
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied'
  });
gtag('config', 'G-X652XRGDPL', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="css/css.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Formations</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">2022</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="../../../2022/ast/index.html">
 <span class="dropdown-text">Analyse séries temporelles avec R</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--1" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">2021</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--1">    
        <li>
    <a class="dropdown-item" href="../../../2021/rte/index.html">
 <span class="dropdown-text">Désaisonnalisation avec JDemetra+ et RJDemetra</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="http://github.com/AQLT/formations"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sur cette page</h2>
   
  <ul>
  <li><a href="#manipulation-des-séries-temporelles-avec-ts" id="toc-manipulation-des-séries-temporelles-avec-ts" class="nav-link active" data-scroll-target="#manipulation-des-séries-temporelles-avec-ts">Manipulation des séries temporelles avec <code>ts()</code></a>
  <ul class="collapse">
  <li><a href="#création-dune-série-temporelle" id="toc-création-dune-série-temporelle" class="nav-link" data-scroll-target="#création-dune-série-temporelle">Création d’une série temporelle</a></li>
  <li><a href="#séries-multivariées" id="toc-séries-multivariées" class="nav-link" data-scroll-target="#séries-multivariées">Séries multivariées</a></li>
  <li><a href="#manipulation-basiques" id="toc-manipulation-basiques" class="nav-link" data-scroll-target="#manipulation-basiques">Manipulation basiques</a></li>
  </ul></li>
  <li><a href="#utilisation-de-xts-et-zoo" id="toc-utilisation-de-xts-et-zoo" class="nav-link" data-scroll-target="#utilisation-de-xts-et-zoo">Utilisation de <code>xts</code> et <code>zoo</code></a>
  <ul class="collapse">
  <li><a href="#utilisation-de-xts" id="toc-utilisation-de-xts" class="nav-link" data-scroll-target="#utilisation-de-xts">Utilisation de <code>xts</code></a></li>
  <li><a href="#utilisation-de-zoo" id="toc-utilisation-de-zoo" class="nav-link" data-scroll-target="#utilisation-de-zoo">Utilisation de <code>zoo</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">0 - Traitement des séries temporelles sous R</h1>
<p class="subtitle lead"></p><p>Formation - Désaisonnalisation avec JDemetra+ et RJDemetra <img src="img/logo.png" class="img-fluid" style="width:1in"></p><p></p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Auteur</div>
    <div class="quarto-title-meta-contents">
             <p>Alain Quartier-la-Tente </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<blockquote class="blockquote">
<p>L’objectif de ce TP est d’apprendre à manipuler les séries temporelles sous R en utilisant les packages de bases.</p>
</blockquote>
<p>Dans R il existe de nombreux packages qui permettent de manipuler les séries temporelles. Pour n’en citer que quelques-uns :<br>
- Les objets <code>ts</code> peuvent être créés à partir du package <code>stats</code> ;<br>
- Les objets <code>zoo</code> peuvent être créés à partir du package <a href="https://CRAN.R-project.org/package=zoo">zoo</a> ;<br>
- Les objets <code>xts</code> peuvent être créés à partir du package <a href="https://CRAN.R-project.org/package=xts">xts</a> ;<br>
- Les objets <code>tis</code> peuvent être créés à partir du package <a href="https://CRAN.R-project.org/package=tseries">tseries</a> ;<br>
- Les objets <code>tsibble</code> peuvent être créés à partir du package <a href="https://CRAN.R-project.org/package=tsibble">tsibble</a>.</p>
<p><a href="https://CRAN.R-project.org/package=tsbox">tsbox</a> permet quand à lui de facilement passer d’une classe à l’autre.</p>
<p>Ici nous nous concentrerons essentiellement sur les trois premiers : <code>ts</code> stocker les séries temporelles, <code>zoo</code> et <code>xts</code> pour effectuer certaines manipulations supplémentaires.</p>
<section id="manipulation-des-séries-temporelles-avec-ts" class="level1">
<h1>Manipulation des séries temporelles avec <code>ts()</code></h1>
<section id="création-dune-série-temporelle" class="level2">
<h2 class="anchored" data-anchor-id="création-dune-série-temporelle">Création d’une série temporelle</h2>
<p>La fonction <code>ts()</code> permet de créer des objets séries-temporelles à partir un vecteur (ou une matrice). La syntaxe de base est <code>ts(vector, start=, end=, frequency=)</code> où <code>start</code> et <code>end</code> sont la première et la dernière observation, <code>frequency</code> est le nombre d’observations par unité de temps (1=annuelle, 2=semestrielle, 4=trimestrielle, 6=bi-mestrielle, 12=mensuelle, etc.).</p>
<p>Par exemple pour créer une série trimestrielle ayant les valeurs de 1 à 10 et commençant en 1959Q2 :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">frequency =</span> <span class="dv">4</span>, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1959</span>, <span class="dv">2</span>)) <span class="co"># 2ème trimestre de 1959</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Qtr1 Qtr2 Qtr3 Qtr4
1959         1    2    3
1960    4    5    6    7
1961    8    9   10     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Équivalent à </span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">frequency =</span> <span class="dv">4</span>, <span class="at">start =</span> <span class="dv">1959</span> <span class="sc">+</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">4</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Qtr1 Qtr2 Qtr3 Qtr4
1959         1    2    3
1960    4    5    6    7
1961    8    9   10     </code></pre>
</div>
</div>
<p>On peut aussi définir l’objet à partir de sa date de fin :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">frequency =</span> <span class="dv">4</span>, <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">1959</span>, <span class="dv">2</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Qtr1 Qtr2 Qtr3 Qtr4
1957    1    2    3    4
1958    5    6    7    8
1959    9   10          </code></pre>
</div>
</div>
<p>Si l’on directement extraire un sous-ensemble de la série on peut spécifier les paramètres <code>end</code> et <code>start</code>. Par exemple pour ne garder que les valeurs jusqu’en 1960 inclus :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">frequency =</span> <span class="dv">4</span>, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1959</span>, <span class="dv">2</span>), <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">4</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Qtr1 Qtr2 Qtr3 Qtr4
1959         1    2    3
1960    4    5    6    7</code></pre>
</div>
</div>
<p>Ou alors utiliser la fonction <code>window</code> une fois l’objet créé :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>ts_object <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">frequency =</span> <span class="dv">4</span>, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1959</span>, <span class="dv">2</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">window</span>(ts_object, <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">4</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Qtr1 Qtr2 Qtr3 Qtr4
1959         1    2    3
1960    4    5    6    7</code></pre>
</div>
</div>
<p>On peut récupérer les différents attributs avec les fonctions <code>start()</code>, <code>end()</code> et <code>frequency()</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">start</span>(ts_object)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1959    2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">end</span>(ts_object)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1961    3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">frequency</span>(ts_object)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>Deux autres fonctions peuvent aussi être utiles : <code>time()</code> crée un série-temporelle à partir des dates de notre série-temporelle et <code>cycle()</code> donne la position dans le cycle de chaque observation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">time</span>(ts_object)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Qtr1    Qtr2    Qtr3    Qtr4
1959         1959.25 1959.50 1959.75
1960 1960.00 1960.25 1960.50 1960.75
1961 1961.00 1961.25 1961.50        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cycle</span>(ts_object)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Qtr1 Qtr2 Qtr3 Qtr4
1959         2    3    4
1960    1    2    3    4
1961    1    2    3     </code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercice
</div>
</div>
<div class="callout-body-container callout-body">
<p>Extraire toutes les données du 2ème trimestre de l’objet <code>ts_object</code></p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>ts_object[<span class="fu">cycle</span>(ts_object) <span class="sc">==</span> <span class="dv">2</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 5 9</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercice
</div>
</div>
<div class="callout-body-container callout-body">
<p>Créer une série temporelle mensuelle qui commence en 2000, qui se termine en janvier 2020, qui vaut 1 en avril 2009 et 0 à toutes les autres dates</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>indicatrice <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="dv">0</span>, <span class="at">start =</span> <span class="dv">2000</span>, <span class="at">end =</span> <span class="dv">2020</span>, <span class="at">frequency =</span> <span class="dv">12</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">window</span>(indicatrice, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2005</span>, <span class="dv">4</span>), <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">2005</span>, <span class="dv">4</span>)) <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>indicatrice</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2000   0   0   0   0   0   0   0   0   0   0   0   0
2001   0   0   0   0   0   0   0   0   0   0   0   0
2002   0   0   0   0   0   0   0   0   0   0   0   0
2003   0   0   0   0   0   0   0   0   0   0   0   0
2004   0   0   0   0   0   0   0   0   0   0   0   0
2005   0   0   0   1   0   0   0   0   0   0   0   0
2006   0   0   0   0   0   0   0   0   0   0   0   0
2007   0   0   0   0   0   0   0   0   0   0   0   0
2008   0   0   0   0   0   0   0   0   0   0   0   0
2009   0   0   0   0   0   0   0   0   0   0   0   0
2010   0   0   0   0   0   0   0   0   0   0   0   0
2011   0   0   0   0   0   0   0   0   0   0   0   0
2012   0   0   0   0   0   0   0   0   0   0   0   0
2013   0   0   0   0   0   0   0   0   0   0   0   0
2014   0   0   0   0   0   0   0   0   0   0   0   0
2015   0   0   0   0   0   0   0   0   0   0   0   0
2016   0   0   0   0   0   0   0   0   0   0   0   0
2017   0   0   0   0   0   0   0   0   0   0   0   0
2018   0   0   0   0   0   0   0   0   0   0   0   0
2019   0   0   0   0   0   0   0   0   0   0   0   0
2020   0                                            </code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Pour tracer un graphique il suffit maintenant d’utiliser les fonctions <code>plot()</code> et <code>lines()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ts_object <span class="sc">*</span> <span class="dv">2</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(ts_object, <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-0-Traitement_des_series_temporelles_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="séries-multivariées" class="level2">
<h2 class="anchored" data-anchor-id="séries-multivariées">Séries multivariées</h2>
<p>De la même façon que précédemment on peut créer une série temporelle multivariée. Cette fois-ci l’objet créé est à la fois <code>mts</code>, <code>ts</code> et <code>matrix</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>mts <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">300</span>), <span class="dv">100</span>, <span class="dv">3</span>), <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1961</span>, <span class="dv">1</span>), <span class="at">frequency =</span> <span class="dv">12</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On peut accéder à la première variable de la même façon que dans une matrice : par son nom ou son numéro de colonne :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mts)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Series 1" "Series 2" "Series 3"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mts[,1] # ou de façon équivalente :</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>mts[, <span class="st">"Series 1"</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Jan         Feb         Mar         Apr         May         Jun
1961  0.48457656 -0.35498297 -4.07604013 -0.94818736  0.49777745  0.83790218
1962 -0.59378326 -0.12329912  0.14425366 -1.87033256  2.07358714 -0.79759979
1963 -1.32728072  0.43801327  0.27269378  0.50397756 -0.71284225 -0.28389309
1964 -0.65843830 -1.23378701 -0.10760678  0.23627752  0.27659537  0.87856469
1965 -0.16224075 -1.38098691 -0.84078131 -0.57084346  0.24409719  1.32974484
1966 -0.12101717 -0.71629919  0.70740582  0.27336550  0.47031910 -2.14256903
1967  0.49154784 -0.46248882  1.53373504  1.69799441 -1.35614340  0.81509954
1968  1.46840899 -0.28817877 -0.05167282 -0.05508327 -0.75298834 -0.35390815
1969 -0.98758474  1.23111712 -1.06354431 -1.68894505                        
             Jul         Aug         Sep         Oct         Nov         Dec
1961  1.00576280 -0.08247037 -0.70366556 -0.26087010  1.04846904 -1.71825380
1962  0.22070799  1.01982402  0.53763430 -1.02860299 -0.61588759  1.56678439
1963 -0.84023146  1.39245730 -0.11318523 -1.47566125 -0.48108957 -1.29835261
1964  0.07445877 -0.56883127  0.60440919 -0.65243419  0.98461073 -2.47754589
1965  0.88815020  1.72164040 -1.30703847  0.28122870 -0.49543356  1.08880197
1966  3.24831138  1.01697072  1.42221349 -1.13667101 -1.23098253  0.48852850
1967 -1.54316150  0.57076612  0.40654318  0.10156154  0.12003689  0.55890502
1968  0.97194091  0.05395929 -1.45792337 -0.16589613 -1.35823982 -0.26852694
1969                                                                        </code></pre>
</div>
</div>
<p>Et avec les même fonctions que pour les matrices on peut récupérer les noms des colonnes (<code>colnames</code>), le nombre de variables (<code>ncol</code>), etc.</p>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Attention
</div>
</div>
<div class="callout-body-container callout-body">
<p>Une source classique d’erreur est de manipuler des séries-temporelles uni et multivariées et de vouloir utiliser les fonctions liées aux matrices sur les séries univariées. Par exemple, <code>colnames(ts_object)</code> renverra toujours l’objet <code>NULL</code>. Une solution est de tester si l’objet est multivarié avec la fonction <code>is.mts()</code>.</p>
</div>
</div>
</section>
<section id="manipulation-basiques" class="level2">
<h2 class="anchored" data-anchor-id="manipulation-basiques">Manipulation basiques</h2>
<p>Pour concaténer plusieurs séries temporelles, les fonctions deux fonctions suivantes peuvent <code>ts.union()</code> et <code>ts.intersect()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ts_object2 <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">frequency =</span> <span class="dv">4</span>, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1960</span>, <span class="dv">1</span>))</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ts.union</span>(ts_object, ts_object2) <span class="co"># on garde toute la couverture temporelle en rajoutant des NA</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        ts_object ts_object2
1959 Q2         1         NA
1959 Q3         2         NA
1959 Q4         3         NA
1960 Q1         4          1
1960 Q2         5          2
1960 Q3         6          3
1960 Q4         7          4
1961 Q1         8          5
1961 Q2         9          6
1961 Q3        10          7
1961 Q4        NA          8
1962 Q1        NA          9
1962 Q2        NA         10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ts.intersect</span>(ts_object, ts_object2) <span class="co"># on ne garde que les périodes communes</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        ts_object ts_object2
1960 Q1         4          1
1960 Q2         5          2
1960 Q3         6          3
1960 Q4         7          4
1961 Q1         8          5
1961 Q2         9          6
1961 Q3        10          7</code></pre>
</div>
</div>
<p>On va maintenant utiliser la série d’indice de production industrielle de la France (CVS-CJO) :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>ipi_fr_manuf <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="fu">c</span>(<span class="fl">94.2</span>, <span class="fl">96.69</span>, <span class="fl">95.66</span>, <span class="fl">95.06</span>, <span class="fl">95.96</span>, <span class="fl">93.97</span>, <span class="fl">94.16</span>, <span class="fl">93.4</span>, </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fl">94.12</span>, <span class="fl">94.29</span>, <span class="fl">92.42</span>, <span class="fl">93.01</span>, <span class="fl">94.98</span>, <span class="fl">93.31</span>, <span class="fl">93.76</span>, <span class="fl">93.06</span>, <span class="fl">91.93</span>, </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fl">93.41</span>, <span class="fl">91.68</span>, <span class="fl">92.98</span>, <span class="fl">93.42</span>, <span class="fl">92.39</span>, <span class="fl">93.74</span>, <span class="fl">92.69</span>, <span class="fl">93.12</span>, <span class="fl">92.57</span>, </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fl">93.49</span>, <span class="fl">92.59</span>, <span class="fl">92.85</span>, <span class="fl">91.74</span>, <span class="fl">91.23</span>, <span class="fl">91.53</span>, <span class="fl">90.08</span>, <span class="fl">90.47</span>, <span class="fl">89.97</span>, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fl">88.44</span>, <span class="fl">88.66</span>, <span class="fl">87.86</span>, <span class="fl">87.38</span>, <span class="fl">87.42</span>, <span class="fl">87.14</span>, <span class="fl">86.24</span>, <span class="fl">87.67</span>, <span class="fl">86.86</span>, </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fl">87.2</span>, <span class="fl">87.68</span>, <span class="fl">85.93</span>, <span class="fl">86.25</span>, <span class="fl">88.14</span>, <span class="fl">87.71</span>, <span class="fl">88.21</span>, <span class="fl">89.59</span>, <span class="fl">90.38</span>, </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fl">90.76</span>, <span class="fl">91.67</span>, <span class="fl">92.18</span>, <span class="fl">91.79</span>, <span class="fl">93.02</span>, <span class="fl">94.54</span>, <span class="fl">94.04</span>, <span class="fl">94.17</span>, <span class="fl">94.56</span>, </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="fl">93.94</span>, <span class="fl">94.29</span>, <span class="fl">93.59</span>, <span class="fl">94.34</span>, <span class="fl">94.79</span>, <span class="fl">94.04</span>, <span class="fl">94.62</span>, <span class="fl">93.51</span>, <span class="fl">92.59</span>, </span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="fl">94.9</span>, <span class="fl">93.89</span>, <span class="fl">93.19</span>, <span class="fl">94.19</span>, <span class="fl">93.67</span>, <span class="fl">95.19</span>, <span class="fl">94.72</span>, <span class="fl">92.82</span>, <span class="fl">95.49</span>, </span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="fl">95.13</span>, <span class="fl">94.21</span>, <span class="fl">95.42</span>, <span class="fl">95.34</span>, <span class="fl">94.39</span>, <span class="fl">96.09</span>, <span class="fl">97.14</span>, <span class="fl">100.02</span>, <span class="fl">97.84</span>, </span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="fl">98.59</span>, <span class="fl">98.72</span>, <span class="fl">102.9</span>, <span class="fl">100.51</span>, <span class="fl">103.23</span>, <span class="fl">100.91</span>, <span class="fl">103.1</span>, <span class="fl">103.21</span>, <span class="fl">103.76</span>, </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="fl">102.15</span>, <span class="fl">103.37</span>, <span class="fl">104.98</span>, <span class="fl">104.21</span>, <span class="fl">105.32</span>, <span class="fl">102.65</span>, <span class="fl">104.34</span>, <span class="fl">104.07</span>, </span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="fl">104.39</span>, <span class="fl">103.62</span>, <span class="fl">104.75</span>, <span class="fl">103.36</span>, <span class="fl">103.8</span>, <span class="fl">104.89</span>, <span class="fl">105.49</span>, <span class="fl">106.69</span>, </span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="fl">106.91</span>, <span class="fl">104.6</span>, <span class="fl">107.76</span>, <span class="fl">109.36</span>, <span class="fl">109.26</span>, <span class="fl">108.33</span>, <span class="fl">109.12</span>, <span class="fl">109.6</span>, </span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="fl">110.2</span>, <span class="fl">110.81</span>, <span class="fl">112.57</span>, <span class="fl">110.92</span>, <span class="fl">112.15</span>, <span class="fl">110.86</span>, <span class="fl">111.53</span>, <span class="fl">112.75</span>, </span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="fl">112.67</span>, <span class="fl">114.3</span>, <span class="fl">113.32</span>, <span class="fl">114.09</span>, <span class="fl">114.65</span>, <span class="fl">112.12</span>, <span class="fl">113.06</span>, <span class="fl">113.27</span>, </span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="fl">111.34</span>, <span class="fl">114.36</span>, <span class="fl">111.94</span>, <span class="fl">112.04</span>, <span class="fl">109.81</span>, <span class="fl">110.12</span>, <span class="fl">110.98</span>, <span class="fl">111.91</span>, </span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="fl">112.23</span>, <span class="fl">112.86</span>, <span class="fl">111.23</span>, <span class="fl">111.13</span>, <span class="fl">109.96</span>, <span class="fl">112.59</span>, <span class="fl">110.62</span>, <span class="fl">109.69</span>, </span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="fl">111.26</span>, <span class="fl">108.05</span>, <span class="fl">110.05</span>, <span class="fl">110.39</span>, <span class="fl">110.92</span>, <span class="fl">110.7</span>, <span class="fl">107.72</span>, <span class="fl">107.26</span>, </span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="fl">109.22</span>, <span class="fl">108.78</span>, <span class="fl">108.66</span>, <span class="fl">110.62</span>, <span class="fl">108.8</span>, <span class="fl">109.42</span>, <span class="fl">110.12</span>, <span class="fl">111.6</span>, </span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="fl">110.61</span>, <span class="dv">111</span>, <span class="fl">110.22</span>, <span class="fl">111.69</span>, <span class="fl">112.3</span>, <span class="fl">107.68</span>, <span class="fl">111.92</span>, <span class="fl">112.66</span>, <span class="fl">110.38</span>, </span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="fl">110.74</span>, <span class="fl">113.16</span>, <span class="fl">111.04</span>, <span class="fl">108.72</span>, <span class="dv">112</span>, <span class="fl">110.35</span>, <span class="fl">110.3</span>, <span class="fl">110.21</span>, <span class="fl">109.04</span>, </span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="fl">112.63</span>, <span class="fl">109.26</span>, <span class="fl">113.55</span>, <span class="fl">112.07</span>, <span class="fl">111.16</span>, <span class="fl">110.64</span>, <span class="fl">112.98</span>, <span class="fl">111.54</span>, </span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="fl">114.46</span>, <span class="fl">114.28</span>, <span class="fl">112.29</span>, <span class="fl">111.52</span>, <span class="fl">113.52</span>, <span class="fl">112.84</span>, <span class="fl">112.1</span>, <span class="fl">114.24</span>, </span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="fl">113.24</span>, <span class="fl">114.18</span>, <span class="fl">114.73</span>, <span class="fl">113.28</span>, <span class="fl">115.9</span>, <span class="fl">114.88</span>, <span class="fl">115.04</span>, <span class="fl">115.72</span>, </span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="fl">112.57</span>, <span class="fl">115.17</span>, <span class="fl">113.71</span>, <span class="fl">113.82</span>, <span class="fl">115.29</span>, <span class="fl">116.48</span>, <span class="fl">114.36</span>, <span class="fl">116.12</span>, </span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a><span class="fl">111.24</span>, <span class="fl">110.64</span>, <span class="fl">111.49</span>, <span class="fl">109.8</span>, <span class="fl">109.25</span>, <span class="fl">107.21</span>, <span class="fl">100.8</span>, <span class="fl">99.34</span>, </span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a><span class="fl">94.87</span>, <span class="fl">93.66</span>, <span class="fl">92.19</span>, <span class="fl">92.2</span>, <span class="fl">93.49</span>, <span class="fl">95.23</span>, <span class="fl">94.71</span>, <span class="fl">96.27</span>, <span class="fl">97.09</span>, </span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a><span class="fl">96.3</span>, <span class="fl">97.66</span>, <span class="fl">96.56</span>, <span class="fl">97.12</span>, <span class="fl">96.6</span>, <span class="fl">98.78</span>, <span class="fl">98.7</span>, <span class="fl">99.27</span>, <span class="fl">99.03</span>, <span class="fl">99.69</span>, </span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="fl">98.63</span>, <span class="fl">99.98</span>, <span class="fl">99.7</span>, <span class="fl">100.82</span>, <span class="fl">101.79</span>, <span class="fl">104.09</span>, <span class="fl">105.03</span>, <span class="fl">103.59</span>, <span class="fl">102.21</span>, </span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="fl">105.56</span>, <span class="fl">101.55</span>, <span class="fl">103.08</span>, <span class="fl">101.93</span>, <span class="fl">101.22</span>, <span class="fl">101.5</span>, <span class="fl">104.35</span>, <span class="fl">102.1</span>, </span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a><span class="fl">101.05</span>, <span class="fl">100.14</span>, <span class="fl">101.87</span>, <span class="fl">100.16</span>, <span class="fl">99.79</span>, <span class="fl">99.16</span>, <span class="fl">100.01</span>, <span class="fl">101.92</span>, </span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a><span class="fl">100.11</span>, <span class="fl">97.66</span>, <span class="fl">97.59</span>, <span class="fl">99.12</span>, <span class="fl">98.02</span>, <span class="fl">98.55</span>, <span class="fl">98.78</span>, <span class="fl">100.31</span>, <span class="fl">100.31</span>, </span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a><span class="fl">99.64</span>, <span class="fl">98.56</span>, <span class="fl">98.37</span>, <span class="fl">98.54</span>, <span class="fl">99.16</span>, <span class="fl">100.35</span>, <span class="fl">99.27</span>, <span class="fl">98.24</span>, <span class="fl">99.95</span>, </span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a><span class="fl">99.43</span>, <span class="fl">99.53</span>, <span class="fl">96.53</span>, <span class="fl">99.06</span>, <span class="fl">100.11</span>, <span class="fl">98.2</span>, <span class="fl">99.17</span>, <span class="fl">97.91</span>, <span class="fl">96.93</span>, </span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a><span class="fl">99.45</span>, <span class="fl">99.02</span>, <span class="fl">99.38</span>, <span class="fl">99.74</span>, <span class="fl">99.38</span>, <span class="fl">100.85</span>, <span class="fl">100.02</span>, <span class="fl">98.66</span>, <span class="fl">100.22</span>, </span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a><span class="fl">101.23</span>, <span class="fl">100.64</span>, <span class="fl">99.94</span>, <span class="fl">100.92</span>, <span class="fl">102.39</span>, <span class="fl">100.8</span>, <span class="fl">99.54</span>, <span class="fl">100.73</span>, </span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a><span class="fl">99.76</span>, <span class="fl">99.07</span>, <span class="fl">99.77</span>, <span class="fl">101.63</span>, <span class="fl">100.4</span>, <span class="fl">99.4</span>, <span class="fl">102.76</span>, <span class="fl">100.97</span>, <span class="fl">100.16</span>, </span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a><span class="fl">101.11</span>, <span class="fl">102.62</span>, <span class="fl">101.82</span>, <span class="fl">103.7</span>, <span class="fl">103.02</span>, <span class="fl">103.59</span>, <span class="fl">103.54</span>, <span class="fl">104.38</span>, </span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a><span class="fl">105.57</span>, <span class="fl">105.52</span>, <span class="fl">105.93</span>, <span class="fl">103.59</span>, <span class="fl">102.87</span>, <span class="fl">103.82</span>, <span class="fl">103.83</span>, <span class="fl">102.5</span>, </span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a><span class="fl">104.23</span>, <span class="fl">104.04</span>, <span class="fl">104.61</span>, <span class="fl">103.38</span>, <span class="fl">104.22</span>, <span class="fl">103.42</span>, <span class="fl">103.7</span>, <span class="fl">104.93</span>, </span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a><span class="fl">105.75</span>, <span class="fl">104.38</span>, <span class="fl">104.29</span>, <span class="fl">105.98</span>, <span class="fl">103.72</span>, <span class="fl">104.07</span>, <span class="fl">103.1</span>, <span class="fl">103.88</span>, </span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a><span class="fl">104.37</span>), <span class="at">start =</span> <span class="dv">1990</span>, <span class="at">frequency =</span> <span class="dv">12</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Pour calculer la série retardée/avancée, il suffit d’utiliser la fonction <code>lag()</code> :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># série retardée d'un mois : en février 2010 on a la valeur de janvier 2010</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(ipi_fr_manuf, <span class="at">k =</span> <span class="sc">-</span><span class="dv">1</span>) </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La fonction <code>diff</code> permet de calculer la différence entre deux périodes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span>(ipi_fr_manuf, <span class="at">k =</span> <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercice
</div>
</div>
<div class="callout-body-container callout-body">
<p>Écrire une fonction <code>ev()</code> qui calcule l’évolution mensuelle si la série en entrée est mensuelle, l’évolution trimestrielle si la série en entrée est trimestrielle, etc.</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>ev <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> (x<span class="sc">/</span><span class="fu">lag</span>(x, <span class="at">k =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ou de manière équivalente :</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>ev2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Attention ici c'est bien k = 1 dans la fonction diff</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># et k = -1 dans la fonction lag</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> (<span class="fu">diff</span>(x, <span class="at">k =</span> <span class="dv">1</span>) <span class="sc">/</span><span class="fu">lag</span>(x, <span class="at">k =</span> <span class="sc">-</span><span class="dv">1</span>)) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="do">#################################################</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Remarque : pour des raisons informatiques ces deux fonctions ne donnent pas exactement</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="co"># le même résultat. C'est un problème récurrent lorsque l'on</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="co"># souhaite tester l'égalité entre deux séries temporelles :</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span> (<span class="fu">ev</span>(ipi_fr_manuf) <span class="sc">==</span> <span class="fu">ev2</span>(ipi_fr_manuf))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Une solution est plutôt d'utiliser la fonction all.equal():</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">isTRUE</span>(<span class="fu">all.equal</span>(<span class="fu">ev</span>(ipi_fr_manuf), <span class="fu">ev2</span>(ipi_fr_manuf)))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="utilisation-de-xts-et-zoo" class="level1">
<h1>Utilisation de <code>xts</code> et <code>zoo</code></h1>
<section id="utilisation-de-xts" class="level2">
<h2 class="anchored" data-anchor-id="utilisation-de-xts">Utilisation de <code>xts</code></h2>
<p>Un des avantages du package <code>xts</code> est qu’il permet d’appliquer une fonction à chaque période d’une série temporelle (par exemple à toutes les données trimestrielles, annuelles, etc.). Il s’agit des fonctions <code>apply.monthly()</code>, <code>apply.quarterly()</code>, <code>apply.yearly()</code>, etc. Pour cela il faut auparavant convertir les données au format <code>xts</code>.<br>
</p>
<p>Par exemple pour calculer la moyenne annuelle :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xts)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>moy_an <span class="ot">&lt;-</span> <span class="fu">apply.yearly</span>(<span class="fu">as.xts</span>(ipi_fr_manuf), mean)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>moy_an</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              [,1]
déc 1990  94.41167
déc 1991  93.11250
déc 1992  91.50667
déc 1993  87.19083
déc 1994  91.00250
déc 1995  94.11167
déc 1996  94.43833
déc 1997  99.45333
déc 1998 103.83917
déc 1999 106.26667
déc 2000 111.45667
déc 2001 112.51000
déc 2002 111.04250
déc 2003 109.37833
déc 2004 110.91000
déc 2005 111.02750
déc 2006 112.63083
déc 2007 114.35333
déc 2008 110.16833
déc 2009  95.01917
déc 2010  99.17583
déc 2011 103.01750
déc 2012  99.88167
déc 2013  99.15500
déc 2014  98.70917
déc 2015 100.00000
déc 2016 100.60167
déc 2017 103.41333
déc 2018 103.68417
oct 2019 104.44700</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercice
</div>
</div>
<div class="callout-body-container callout-body">
<p>Calculer l’évolution trimestrielle de <code>ipi_fr_manuf</code>.</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tout d'abord on prolonge l'IPI par des valeurs manquantes jusqu'à la fin </span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># de l'année, sinon la dernière somme sur le trimestre est fausse.</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>ipi_fr_manuf_prolonge <span class="ot">&lt;-</span> <span class="fu">window</span>(ipi_fr_manuf, <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">2019</span>, <span class="dv">12</span>), <span class="at">extend =</span> <span class="cn">TRUE</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>somme_trim <span class="ot">&lt;-</span> <span class="fu">apply.quarterly</span>(<span class="fu">as.xts</span>(ipi_fr_manuf_prolonge), sum)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Attention la fonction lag n'agit pas pareil pour les objets xts et ts :</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co"># il faut ici utiliser l'option k = 1</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>evol_trim <span class="ot">&lt;-</span> (somme_trim<span class="sc">/</span><span class="fu">lag</span>(somme_trim, <span class="at">k =</span> <span class="dv">1</span>) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut utiliser la fonction format() </span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co"># si l'on veut convertir automatiquement en un objet ts</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>start_year <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">format</span>(<span class="fu">start</span>(evol_trim), <span class="st">"%Y"</span>))</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>start_quarter <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(<span class="fu">quarters</span>(<span class="fu">start</span>(evol_trim)), <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ts</span>(evol_trim, <span class="at">start =</span> <span class="fu">c</span>(start_year, start_quarter), <span class="at">frequency =</span> <span class="dv">4</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Qtr1        Qtr2        Qtr3        Qtr4
1990          NA -0.54440761 -1.16144426 -0.69582505
1991  0.83297583 -1.29409679 -0.11494253  0.26611047
1992  0.12911556 -0.71638370 -1.56576954 -1.45140009
1993 -1.85212734 -1.17468738  0.35659509 -0.71447675
1994  1.61625491  2.52594107  1.81361504  2.16224060
1995  0.37997159 -0.15919624  0.43583020 -0.86434997
1996  0.09608541  0.82127493 -0.04936878  0.53979678
1997  0.92992245  3.07002295  1.91600607  1.69132493
1998  0.61189949  1.11283644 -0.07998464 -0.07364478
1999 -0.05447321  1.65432336  0.69385309  2.40548752
2000  0.60253861  1.63565609  0.07179180  1.54839481
2001  0.68880254 -1.05537040 -0.23932634 -1.67930340
2002  0.94888092  0.02984006 -0.61153869 -1.25161329
2003  0.71732523 -1.71414775  0.30090887  0.66736056
2004  1.06130641  0.17452532 -0.30338530  0.56643567
2005 -0.25765474 -0.08110056 -0.23147452  0.90394118
2006 -0.02986144  1.64286994 -0.86693311  0.54842439
2007  0.87564125  0.55823469 -0.21217230 -0.18349693
2008  1.00087540 -2.34882847 -2.20710059 -7.01579234
2009 -8.66438913  0.07124537  2.54520860  0.85048773
2010  0.68153656  1.53846154  0.43771044  1.34428428
2011  3.44017730 -1.08407150 -0.99896547  0.56166933
2012 -1.58792012 -1.30337227  0.97957273 -2.53939876
2013  0.33291436  1.66243440 -1.59528409  1.12024909
2014 -0.38824553 -0.83999731  0.79967471 -1.07234100
2015  1.30823338  0.70772120 -0.04662781  0.46316351
2016  0.40796020 -1.04713771  0.74776339  0.44068920
2017  0.25071751  1.53015894  0.96259804  1.76880357
2018 -2.12604883  0.09024107  0.47333849 -0.22113258
2019  1.19483523 -0.33961785 -0.93633555          NA</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="utilisation-de-zoo" class="level2">
<h2 class="anchored" data-anchor-id="utilisation-de-zoo">Utilisation de <code>zoo</code></h2>
<p>Le package <code>zoo</code> donne un ensemble d’outils qui permettent de manipuler les séries-temporelles. De nombreux packages (dont <code>xts</code>) sont d’ailleurs basés sur ce format. Il permet notamment de faire des imputations de données manquantes selon différentes fonctions (toutes les fonctions commençant par <code>na.</code>) et de mieux gérer le format des dates associées aux séries temporelles (ce qui permet de faire des manipulations avec la fonction <code>format</code>, ce qui permet par exemple plus facilement exporter des séries temporelles sous Excel). Le calcul de l’évolution trimestrielle aurait par exemple pu être faite avec ce package :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>somme_trim <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="fu">as.zoo</span>(ipi_fr_manuf_prolonge), yearqtr, sum)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>somme_trim <span class="ot">&lt;-</span> <span class="fu">as.ts</span>(somme_trim) <span class="co">#La conversion en ts est plus simple depuis un objet zoo</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>evol_trim <span class="ot">&lt;-</span> <span class="fu">ev</span>(somme_trim)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>evol_trim</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Qtr1        Qtr2        Qtr3        Qtr4
1990             -0.54440761 -1.16144426 -0.69582505
1991  0.83297583 -1.29409679 -0.11494253  0.26611047
1992  0.12911556 -0.71638370 -1.56576954 -1.45140009
1993 -1.85212734 -1.17468738  0.35659509 -0.71447675
1994  1.61625491  2.52594107  1.81361504  2.16224060
1995  0.37997159 -0.15919624  0.43583020 -0.86434997
1996  0.09608541  0.82127493 -0.04936878  0.53979678
1997  0.92992245  3.07002295  1.91600607  1.69132493
1998  0.61189949  1.11283644 -0.07998464 -0.07364478
1999 -0.05447321  1.65432336  0.69385309  2.40548752
2000  0.60253861  1.63565609  0.07179180  1.54839481
2001  0.68880254 -1.05537040 -0.23932634 -1.67930340
2002  0.94888092  0.02984006 -0.61153869 -1.25161329
2003  0.71732523 -1.71414775  0.30090887  0.66736056
2004  1.06130641  0.17452532 -0.30338530  0.56643567
2005 -0.25765474 -0.08110056 -0.23147452  0.90394118
2006 -0.02986144  1.64286994 -0.86693311  0.54842439
2007  0.87564125  0.55823469 -0.21217230 -0.18349693
2008  1.00087540 -2.34882847 -2.20710059 -7.01579234
2009 -8.66438913  0.07124537  2.54520860  0.85048773
2010  0.68153656  1.53846154  0.43771044  1.34428428
2011  3.44017730 -1.08407150 -0.99896547  0.56166933
2012 -1.58792012 -1.30337227  0.97957273 -2.53939876
2013  0.33291436  1.66243440 -1.59528409  1.12024909
2014 -0.38824553 -0.83999731  0.79967471 -1.07234100
2015  1.30823338  0.70772120 -0.04662781  0.46316351
2016  0.40796020 -1.04713771  0.74776339  0.44068920
2017  0.25071751  1.53015894  0.96259804  1.76880357
2018 -2.12604883  0.09024107  0.47333849 -0.22113258
2019  1.19483523 -0.33961785 -0.93633555          NA</code></pre>
</div>
</div>
<p>Pour le prochain exercice, utiliser la série suivante :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>serie_avec_NA <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="cn">NA</span>, </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">start=</span> <span class="dv">2000</span>, <span class="at">frequency =</span> <span class="dv">12</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercice
</div>
</div>
<div class="callout-body-container callout-body">
<p>Sur la série <code>serie_avec_NA</code>, utiliser les différentes fonctions du package <code>zoo</code> pour : 1. Enlever les valeurs manquantes au début de la série ; 2. Remplacer les valeurs manquantes à la fin de la série par la dernière valeur observée. 3. Interpoler de manière linéaire les valeurs manquantes entre les 0 et les 1.</p>
</div>
</div>
<div class="callout-caution callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Indice
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Les trois fonctions à utiliser sont : <code>na.trim()</code>, <code>na.locf</code> et <code>na.approx()</code></p>
</div>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># D'abord on enlève les valeurs manquantes au début de la série</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>etape_1 <span class="ot">&lt;-</span> <span class="fu">na.trim</span>(serie_avec_NA, <span class="at">sides =</span> <span class="st">"left"</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>etape_1</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2001   0   0   0   0   0   0   0   0   0   0   0   0
2002   0   0   0   0   0   0   0   0   0   0   0   0
2003  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA
2004  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA
2005   1   1   1   1   1   1   1   1   1   1   1   1
2006   1   1   1   1   1   1   1   1   1   1   1   1
2007  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA  NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensuite on interpole</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>etape_2 <span class="ot">&lt;-</span> <span class="fu">na.approx</span>(etape_1, <span class="at">na.rm =</span> <span class="cn">FALSE</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>etape_2</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec
2001 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00
2002 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00
2003 0.04 0.08 0.12 0.16 0.20 0.24 0.28 0.32 0.36 0.40 0.44 0.48
2004 0.52 0.56 0.60 0.64 0.68 0.72 0.76 0.80 0.84 0.88 0.92 0.96
2005 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00
2006 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00
2007   NA   NA   NA   NA   NA   NA   NA   NA   NA   NA   NA   NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Enfin on remplace les valeurs à la fin de la série</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>etape_3 <span class="ot">&lt;-</span> <span class="fu">na.locf</span>(etape_2)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>etape_3</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec
2001 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00
2002 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00
2003 0.04 0.08 0.12 0.16 0.20 0.24 0.28 0.32 0.36 0.40 0.44 0.48
2004 0.52 0.56 0.60 0.64 0.68 0.72 0.76 0.80 0.84 0.88 0.92 0.96
2005 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00
2006 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00
2007 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercice
</div>
</div>
<div class="callout-body-container callout-body">
<p>À l’aide des fonctions <code>as.yearmon()</code> et <code>format()</code>, créer un data.frame contenant une colonne “date” qui contient les dates au format JJ/MM/YYYY et une deuxième colonnes avec les valeurs de <code>ipi_fr_manuf</code>.</p>
</div>
</div>
<div class="callout-caution callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Indice
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>La fonction <code>as.yearmon()</code> doit être appliquée sur <code>time(ipi_fr_manuf)</code>. Pour la fonction <code>format</code> regarder l’aide <code>?format.Date</code>.</p>
</div>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">as.yearmon</span>(<span class="fu">time</span>(ipi_fr_manuf))</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">format</span>(dates, <span class="st">"%d/%m/%Y"</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>donnees_formatees <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">date =</span> dates, <span class="at">ipi =</span> ipi_fr_manuf)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(donnees_formatees)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        date   ipi
1 01/01/1990 94.20
2 01/02/1990 96.69
3 01/03/1990 95.66
4 01/04/1990 95.06
5 01/05/1990 95.96
6 01/06/1990 93.97</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Il peut également être utile d’exporter un objet R <code>ts</code> ou <code>mts</code> vers un fichier Excel, tout en rajoutant une colonne “date” qui sera au format date. Ci-dessous un exemple en utilisant le package XLConnect :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(XLConnect)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>ts2xls <span class="ot">&lt;-</span> <span class="cf">function</span>(x, file, <span class="at">sheet=</span><span class="st">"Feuille 1"</span>, <span class="at">format =</span> <span class="st">"dd/mm/yyyy"</span>){</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  wb <span class="ot">&lt;-</span> <span class="fu">loadWorkbook</span>(file, <span class="at">create =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">createSheet</span>(wb, sheet)</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.mts</span>(x)){</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    col <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"date"</span>, <span class="fu">colnames</span>(x))</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    col <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"date"</span>, <span class="st">"x"</span>)</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Le titre</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeWorksheet</span>(wb,<span class="fu">matrix</span>(col,<span class="at">nrow =</span> <span class="dv">1</span>),</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sheet =</span> sheet,<span class="at">startCol =</span> <span class="dv">1</span>,<span class="at">startRow =</span><span class="dv">1</span>,</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">header =</span> <span class="cn">FALSE</span>)</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Petit trick pour que la colonne date soit au format date d'Excel</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>  csDate <span class="ot">&lt;-</span> <span class="fu">getOrCreateCellStyle</span>(wb, <span class="at">name =</span> <span class="st">"date"</span>)</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setDataFormat</span>(csDate, <span class="at">format =</span> format)</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>  date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">format</span>(zoo<span class="sc">::</span><span class="fu">as.Date</span>((<span class="fu">time</span>(x))), <span class="st">"%d/%m/%Y"</span>),</span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"%d/%m/%Y"</span>)</span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeWorksheet</span>(wb,date,<span class="at">sheet =</span> sheet,</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>                 <span class="at">startCol =</span> <span class="dv">1</span>,<span class="at">startRow =</span> <span class="dv">2</span>,</span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>                 <span class="at">header =</span> <span class="cn">FALSE</span>)</span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setCellStyle</span>(wb, <span class="at">sheet =</span> sheet, <span class="at">row =</span> <span class="fu">seq_along</span>(date)<span class="sc">+</span><span class="dv">1</span>,</span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">col =</span> <span class="dv">1</span>,</span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">cellstyle =</span> csDate)</span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fin colonne date</span></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Autres colonnes</span></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeWorksheet</span>(wb,x,<span class="at">sheet =</span> sheet,<span class="at">startCol =</span> <span class="dv">2</span>,<span class="at">startRow =</span> <span class="dv">2</span>,</span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>                 <span class="at">header =</span> <span class="cn">FALSE</span>)</span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setColumnWidth</span>(wb, sheet, <span class="at">column =</span> <span class="fu">seq_along</span>(col), <span class="at">width =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveWorkbook</span>(wb, file)</span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="AQLT/formations" data-repo-id="R_kgDOIepagw" data-category="Announcements" data-category-id="DIC_kwDOIepag84CSt5_" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="fr" crossorigin="anonymous" data-loading="lazy" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2022, Alain Quartier-la-Tente, Insee</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="http://github.com/AQLT">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://aqlt.netlify.app">
      <i class="bi bi-globe" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/alainqlt/">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>